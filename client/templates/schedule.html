<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="/static/js/jquery.min.js" type="text/javascript"></script>
    <title>排班信息更新</title>
</head>
<script>
    $(function(){
        $.ajax({
            url:'http://127.0.0.1:8000/update/schedule',
			type:'get',
			// 响应的数据格式
			dataType:'json',
			// 请求的数据格式
			contentType:'application/json',
			success:function(res){
				if(res.code == 200){
					// 将排班数据显示  res={'code':200,'data':[{},{},{},...]}
					alert("数据获取成功");
					// 拼接表数据
					var str = ``
					str += '<div class="header-item"><div class="open-site-header"><div class="open-menu-area "><div class="open-nav-menu"><ul class="open-nav-main-menu"><li class="open-menu-item  selected "><div><a class="open-menu-item-text" href="/index">                  首页</a></div><li class="open-menu-item "><div class="open-fn-arrow has-submenu"><a class="open-menu-item-text" target="_blank" href="/schedule">                  医生管理系统</a><div class="menu-popup"><ul class="open-submenu"><li class="open-submenu-item "><div><a target="_blank" href="/update_schedule">排班管理</a></div></li><li class="open-submenu-item "><div><a target="_blank" href="/update_doc">更新医生信息</a></div></li><li class="open-submenu-item "><div><a target="_blank" href="/all_doc">查看医生信息</a></div></li><li class="open-submenu-item "><div><a target="_blank" href="/add_doc">新增医生信息</a></div></li></ul></div></div></li></ul><ul id="open-nav-right-menu" class="open-nav-right-menu"><li class="open-menu-item open-menu-login open-menu-login-border" id="open-menu-login"><div><a id="p1" class="p2" href="#"></a></div></li><li id="J_joinOpen" class="open-menu-item open-menu-item-free"><a id="p3" class="p4" type="" onclick="off()" href="/login">注册登录</a></li></ul></div></div></div></div>'
					str += '<a href="http://127.0.0.1:5000/update_schedule">'+'更新排班信息'+'</a>';

                    str += '<table>'+'<tr><th>'+'编号'+'</th><th>'+'姓名'+'</th><th>'+
                    '科室'+'</th><th>'+'值班时间'+'</th></tr>';

					for(var i=0;i<res.data.length;i++){

					    str += `<tr>
					            <th>${res.data[i].id}</th>
					            <th>${res.data[i].name}</th>
					            <th>${res.data[i].dname}</th>
					            <th>${res.data[i].workday}</th>
					            </tr>`;}

                    str += '</table>';
					$('body').html(str);
				}
				else{
					alert("数据丢失");
				}
			}

        })
    })








</script>
<link rel="stylesheet" href="/static/css/index.css">
<body>

</body>
</html>