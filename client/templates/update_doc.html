<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="/static/js/jquery.min.js" type="text/javascript"></script>
    <title>更新医生信息</title>
    <link rel="stylesheet" href="/static/css/index.css">
</head>
<body>
    <div class="header-item"><div class="open-site-header"><div class="open-menu-area "><div class="open-nav-menu"><ul class="open-nav-main-menu"><li class="open-menu-item  selected "><div><a class="open-menu-item-text" href="/index">                  首页</a></div><li class="open-menu-item "><div class="open-fn-arrow has-submenu"><a class="open-menu-item-text" target="_blank" href="/schedule">                  医生管理系统</a><div class="menu-popup"><ul class="open-submenu"><li class="open-submenu-item "><div><a target="_blank" href="/update_schedule">排班管理</a></div></li><li class="open-submenu-item "><div><a target="_blank" href="/update_doc">更新医生信息</a></div></li><li class="open-submenu-item "><div><a target="_blank" href="/all_doc">查看医生信息</a></div></li><li class="open-submenu-item "><div><a target="_blank" href="/add_doc">新增医生信息</a></div></li></ul></div></div></li></ul></div></div></div></div>
    <p>
    原ID:<input name="id" type="text" class="id" value="请输入要更新的原医生ID">
    </p>
    下面请输入要更新的医生新信息：
    <p>
    姓名:<input name="doctorname" class="doctorname" type="text" >
    </p>
    <p>
    年龄:<input name="age" class="age" type="text" >
    </p>
    <p>
    性别:<input name="gender" class="gender" type="text" >
    </p>
    <p>
    科室:<input name="dname" class="dname" type="text" >
    </p>
    <p>
    职称:<input name="title" class="title" type="text" >
    </p>
    <p>
    手机:<input name="phone" class="phone" type="text" >
    </p>
    <p>
    邮箱:<input name="email" class="email" type="email" >
    </p>
    <p>
    简介:<input name="d_space" class="d_space" type="text" >
    </p>
    <p>
    就诊上限:<input name="limit_visits" class="limit_visits" type="text" >
    </p>
    <p>
    <input type="submit" value="保存" onclick="update()">
    </p>

<script>
    function update(){
		// 1 获取用户输入
		var id = $('.id').val();
		var doctorname = $('.doctorname').val();
		var age = $('.age').val();
		var title = $('.title').val();
		var phone = $('.phone').val();
		var limit_visits = $('.limit_visits').val();
		var dname = $('.dname').val();
		var gender = $('.gender').val();
		var email = $('.email').val();
		var d_space = $('.d_space').val();
		// 2 封装成一个json对象,console.log发送前,检查一下数据
		var post_data = {"id":id,"doctorname":doctorname,"age":age,"dname":dname,"gender":gender,
		"email":email,"title":title,"phone":phone,"limit_visits":limit_visits,"d_space":d_space};
		console.log(post_data)
		// 3 发送异步请求
		$.ajax({
			url:'http://127.0.0.1:8000/update/update_doc',
			type:'post',
			dataType:'json',
			data:JSON.stringify(post_data),
			contentType:'application/json',
			success:function(res){
				if(res.code == 200){
					window.location = 'http://127.0.0.1:5000/all_doc'
				}else{
					alert(res.error);
				}
			}


		});

	}
</script>
</body>
</html>